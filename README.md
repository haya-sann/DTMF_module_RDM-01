RDM-01　-DTMF decoder module- manual
===
## RDM-01について
- **開発背景**

　以前スマートスピーカーと連携したガジェットをつくりたい！そう思ったものの、サーバーサイドの開発もわからず、どうやって実現したらいいのわかりませんでした。
 自分の場合多くの学びが必要で、実際にスマートスピーカーとガジェットの連携ができるようになるのに多くの時間がかかりました。
 
 このような経験を通し、スマートスピーカーをとハードウェア連携は未だ敷居が高く、システムを作ることが大変だとわかってきました。
 
 そこでRDM-01というモジュールを開発することにしました。
 
 RDM-01はスマートスピーカーやスマートフォンをユーザーインターフェースとしたオリジナルガジェットの開発を容易にするためのモジュールです。
 このモジュールの役割はデジタル処理ができる任意の音を使い、ローカル通信を実現する橋渡しをするところにあります。
　音をデジタル処理することで、スピーカーの音を信号処理の一部として利用することができ、結果としてwebの開発経験がなく、Arduino等の組み込みを主にされていた方でも、　web側の開発をすることなく、スマートスピーカーをユーザーインターフェースとして使うことができるようになります。
 
 
- **動作原理**

　RDM-01はMT8870というICを利用し、DTMF(Dual-Tone Multi-Frequency)と呼ばれる、電話のプッシュ回線で利用される「ピポパ」という音を解析します。
 
この音は特定の２種類の周波数の合成波(１６種類あります)で、２種類の音をICが解析することで割り当てられた特定の数字として認識し、その結果を４つのピンのHIGH、LOWで表現します。

 
 ## 使い方
  RDM-01は5つのGPIOとVCC、GNDの計７つのピンを使います。

 ５つのGPIOのうち４つは、１６種類あるDTMF信号の、何番なのかを表現するためにあり、１つは取得できたことを伝えるためにあります。
  
![RDMdetal](http://www.rino-make-fun.com/wp-content/uploads/2019/01/RDM-01View-1.png)
 
 実際の基板の画像と照らし合わせて説明すると、以下の機能を示します。
 - +5V -> ５Vピン　
 - GND -> GNDピン
 - Q1 -> 4bit表現のうち**0bit**を表現するピン
 - Q２ -> 4bit表現のうち**1bit**を表現するピン
 - Q３ -> 4bit表現のうち**2bit**を表現するピン
 - Q４ -> 4bit表現のうち**3bit**を表現するピン
 - StD -> DTMF信号が取得できたときに、立ち上がるピン。ArduinoではInterruptPinを利用すると便利です。

**このモジュールは５V駆動になります。当然出力も5Vとなるので、3.3V等で使用する場合は、分圧しマイコンの保護をしてください。**
また右上の大きな穴はGNDに接続されており、GNDの強化や筐体に取り付けるなどに活用してください。


次に、実際に取得できる１６種類の音は以下の表で示されます。

![DTMFDetal](http://www.rino-make-fun.com/wp-content/uploads/2019/01/dtmfDetail.png)

Arduinoでは

## サンプルコード
このリポジトリではArduinoを使ったサンプルコードを提供しています。

サンプルコードは下記ピン設定で実行されています。
 - +5V -> ５Vピン　
 - GND -> GNDピン
 - Q1 -> 6番ピン
 - Q２ -> 5番ピン
 - Q３ -> 4番ピン
 - Q４ -> 3番ピン
 - StD -> 2番ピン(割り込み0番ピン)
 
 ![Arduino](http://www.rino-make-fun.com/wp-content/uploads/2019/01/IMG_2194.jpg)



